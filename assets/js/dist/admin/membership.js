jQuery(document).ready((function(e){var n=e("#membership_plans_container .membership_plan").length,s="";e.each(crlms_membership_params.courses,(function(e,n){s+='<option value="'.concat(n.id,'">').concat(n.title,"</option>")}));var t="";e.each(crlms_membership_params.subscription_options,(function(e,n){t+='<option value="'.concat(e,'">').concat(n,"</option>")})),e("#add_membership_plan").on("click",(function(c){c.preventDefault();var i='\n            <div class="membership_plan">\n                <p>\n                    <label for="membership_plan_title_'.concat(n,'">Plan Title</label>\n                    <input type="text" id="membership_plan_title_').concat(n,'" name="membership_plan_title[]" value="" />\n                </p>\n                <p>\n                    <label for="membership_plan_price_').concat(n,'">Plan Price</label>\n                    <input type="number" id="membership_plan_price_').concat(n,'" name="membership_plan_price[]" value="" step="0.01" />\n                </p>\n                <p>\n                   <label for="subscription_type_').concat(n,'">Subscription Type</label>\n                   <select id="subscription_type_').concat(n,'" name="subscription_type[').concat(n,']" class="subscription_type">\n                            ').concat(t,'\n                   </select>\n                </p>\n                <p>\n                    <label for="connected_courses_').concat(n,'">Connected Courses</label>\n                    <select id="connected_courses_').concat(n,'" name="connected_courses[').concat(n,'][]" multiple="multiple" class="connected_courses" style="width: 100%;">\n                        ').concat(s,'\n                    </select>\n                </p>\n                <button type="button" class="button button-secondary remove_membership_plan">Remove</button>\n                <hr>\n            </div>\n        ');e("#membership_plans_container").append(i),n++})),e("#membership_plans_container").on("click",".remove_membership_plan",(function(n){n.preventDefault(),e(this).closest(".membership_plan").remove()})),e("#membership_save_button").on("click",(function(n){n.preventDefault(),e(".crlms-loader").html('<div class="spinner is-active"></div>').show();var s=e("#post_ID").val(),t=[];e("#membership_plans_container .membership_plan").each((function(){var n=e(this).find('input[name="membership_plan_title[]"]').val(),s=e(this).find('input[name="membership_plan_price[]"]').val(),c=e(this).find('input[name="membership_plan_id[]"]').val(),i=e(this).find(".connected_courses").val(),a=e(this).find(".subscription_type").val();t.push({plan_id:c,title:n,price:s,courses:i,subscription:a})})),e.ajax({type:"POST",url:crlms_membership_params.ajax_url,data:{action:"crlms_save_membership_details",nonce:crlms_membership_params.nonce,post_id:s,membership_plans:t},success:function(n){e(".crlms-loader").hide(),"success"===n.status?e(".crlms-notice").html('<div class="notice notice-success"><p>'+n.message+"</p></div>").show():e(".crlms-notice").html('<div class="notice notice-error"><p>'+n.message+"</p></div>").show(),setTimeout((function(){e(".crlms-notice").fadeOut("slow")}),3e3)},error:function(e,n,s){console.log(e.responseText)}})}))}));